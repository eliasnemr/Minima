<ion-header class="page-header ion-no-border">
  <ion-toolbar>
    <ion-title>
      <ion-item id="title" lines="none" class="no-ripple ion-no-padding">
        <ion-icon routerLink="/history" class="back-btn" name="arrow-back"></ion-icon>
        History
      </ion-item>
      <ion-item id="subtitle" class="breadcrumb ion-no-padding" lines="none">
        Transaction details
      </ion-item>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="page-content">
  <ion-grid  *ngIf="!loading && !myTxn">
    <ion-row>
      <ion-col style="display: flex; align-items:center; justify-content:center" size="12">
        <ion-label>Invalid transaction ID!</ion-label>
      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-grid  *ngIf="loading && transactionID.length !== 0">
    <ion-row>
      <ion-col style="display: flex; align-items:center; justify-content:center" size="12">
        <ion-label>Fetching transaction details...</ion-label>
      </ion-col>
      <ion-col style="display: flex; align-items:center; justify-content:center" size="12">
        <ion-spinner name="crescent"></ion-spinner>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid class="ion-no-padding" *ngIf="!loading && transactionID.length !== 0 && myTxn">    
    <ion-list class="ion-no-padding" id="transaction-details">
      <ion-item lines="none" class="ion-no-padding">
        <ion-label>
          <h6 class="title">Status</h6>
          <p class="value completed">Completed</p>
        </ion-label>
      </ion-item>

      <ion-item lines="none" class="ion-no-padding">
        <ion-label>
          <h6 class="title">Hash
            <a class="copy" (click)="copyToClipPWA(myTxn.txpow.txpowid)">
              Copy 
            </a>
          </h6>
          <p class="value"> {{ myTxn.txpow.txpowid }}</p>
        </ion-label>
      </ion-item>

      <ion-item lines="none" class="ion-no-padding">
        <ion-label>
          <h6 class="title">Date & time</h6>
          <p class="value"> {{ relaytime }}</p>
        </ion-label>
      </ion-item>

      <ion-item *ngIf="message && message.length > 0" lines="none" class="ion-no-padding">
        <ion-label>
          <h6 class="title">Public message</h6>
          <p style="white-space: normal;" class="value"> {{ message }}</p>
        </ion-label>
      </ion-item>

      <ion-item lines="none" class="ion-no-padding">
        <ion-label>
          <h6 class="title">Size</h6>
          <p class="value"> {{ myTxn.txpow.size }}</p>
        </ion-label>
      </ion-item>

      <ion-item lines="none" class="ion-no-padding">
        <ion-label>
          <h6 class="title">In block</h6>
          <p class="value">{{ myTxn.txpow.header.block }}</p>
        </ion-label>
      </ion-item>

      <ion-item lines="none" *ngIf="type === 'Token Creation.'" class="ion-no-padding">
        <ion-label>
          <h6 class="title">Token name</h6>
          <p class="value">{{ myTxn.txpow.body.txn.tokengen.token }}</p>
        </ion-label>
      </ion-item>

      <ion-item lines="none" *ngIf="type === 'Token Creation.'" class="ion-no-padding">
        <ion-label>
          <h6 class="title">Token total</h6>
          <p class="value">{{ myTxn.txpow.body.txn.tokengen.total }}</p>
        </ion-label>
      </ion-item>

      <ion-item id="last-child" lines="none" class="ion-no-padding">
        <ion-label>
          <h6 class="title">Transaction type</h6>
          <p class="value">{{type}}</p>
        </ion-label>
      </ion-item> 
    </ion-list>

      


    <ion-list id="input-details">
      <ion-list-header>
        <ion-item lines="none" class="ion-no-padding">
          Transaction inputs
        </ion-item>
      </ion-list-header>

      <ng-container *ngFor="let input of myTxn.txpow.body.txn.inputs; let i = index">
        <div id="inputs">
        <ion-item lines="none" class="ion-no-padding">
          <ion-label>
            <h6 class="title">Index</h6>
            <p class="value">{{ '#'+ i}}</p>
          </ion-label>
        </ion-item>
        <ion-item lines="none" class="ion-no-padding">
          <ion-label>
            <h6 class="title">Coin ID</h6>
            <p class="value">{{ input.coinid }}</p>
          </ion-label>
        </ion-item>
        <ion-item lines="none" class="ion-no-padding">
          <ion-label>
            <h6 class="title"> Recipient address
              <a class="copy" (click)="copyToClipPWA(input.address)">
                Copy
              </a>
            </h6>
            <p class="value">{{ input.mxaddress }}</p>
          </ion-label>
        </ion-item>
        <ion-item lines="full" class="ion-no-padding">
          <ion-label>
            <h6 class="title">Amount</h6>
            <p class="value">{{ input.amount }}</p>
          </ion-label>
        </ion-item>
      </div>
      </ng-container>
    </ion-list>

    <ion-list id="output-details">
      <ion-list-header class="ion-no-padding">
        <ion-item lines="none" class="ion-no-padding">
          Transaction outputs
        </ion-item>
      </ion-list-header>

      <ng-container *ngFor="let output of myTxn.txpow.body.txn.outputs; let i = index">
        <div id="outputs">
        <ion-item lines="none" class="ion-no-padding">
          <ion-label>
            <h6 class="title">Index</h6>
            <p class="value">{{ '#'+ i}}</p>
          </ion-label>
        </ion-item>
        <ion-item lines="none" class="ion-no-padding">
          <ion-label>
            <h6 class="title">Coin ID</h6>
            <p class="value">{{ output.coinid }}</p>
          </ion-label>
        </ion-item>
        <ion-item lines="none" class="ion-no-padding">
          <ion-label>
            <h6 class="title">Outgoing address
              <a class="copy" (click)="copyToClipPWA(output.address)">
                Copy
              </a>
            </h6>
            <p class="value">{{ output.mxaddress }}</p>
          </ion-label>
        </ion-item>
        <ion-item lines="full" class="ion-no-padding">
          <ion-label>
            <h6 class="title">Amount</h6>
            <p class="value">{{ output.amount }}</p>
          </ion-label>
        </ion-item>
      </div>
      </ng-container>
    </ion-list>

  </ion-grid>
</ion-content>

<ion-footer class="border-t">
  <ion-button (click)="giveMe50()" class="gimme50 no-ripple" fill="none">
    Gimme 50
  </ion-button>
</ion-footer>
