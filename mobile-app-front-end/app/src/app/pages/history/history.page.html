<ion-app>
  <ion-header>
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-menu-button></ion-menu-button>
        </ion-buttons>
      <ion-title color="primary">Transaction History</ion-title>
    </ion-toolbar>
  </ion-header>
  
  <ion-content>

  <ion-card>
  
  <ion-card-header>
  <!-- Category Segment -->
  <ion-segment (ionChange)="segmentChanged($event, slides)" [(ngModel)] = "categories">
    <ion-segment-button value="0" class="seg">
      <ion-label>Transactions</ion-label>
    </ion-segment-button>
    <ion-segment-button value="1" class="seg">
      <ion-label>Tokens</ion-label>
    </ion-segment-button>
    <ion-segment-button value="2" class="seg">
    <ion-label>All</ion-label>
    </ion-segment-button>
  </ion-segment>
  </ion-card-header>

  <ion-slides #slides 
              pager="true"
             [options]="sliderOptions" 
             (ionSlideDidChange)="slideChanged(slides)" 
             (ionSlideDidLoad)="slideChanged(slides)">

  <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@ Transactions @@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
  <ion-slide>
    <ion-card-content>
    <!-- NO TRANSACTIONS -->
    <ion-text *ngIf="isEmpty">No activities to display.</ion-text>

    <ng-container *ngFor="let transaction of transactions;">
    <ion-grid>
      <ion-row *ngIf="transactions.length >= 1 && transaction.values[0].name !== 'Create Token';">
        <ion-item 
        lines="full" 
        class="activity"
        (click)="presentModal(transaction.txpow.txpowid, 
                  transaction.values[0].amount,
                  transaction.txpow.body.txn.state,
                  transaction.txpow.header.block,
                  transaction.txpow.body.txn.inputs[0].tokenid,
                  transaction.txpow.header.date,
                  transaction.txpow.isblock,
                  transaction.values[0].name)">

      <!-- TXN Icon -- desktop only -->
      <ion-col size="1" [hidden]="ios">
        <ion-icon [name]="getTXNType(transaction.values[0].amount)" size="large"></ion-icon>
      </ion-col>

      <!-- TXN Date -->
      <ion-col size="2" fixed="true">
      <ion-label>
      <p id="day">
      {{ transaction.txpow.header.date.substring(8, 10) }}
      </p>
      <h1 id="month">
      {{ transaction.txpow.header.date.substring(4, 7) }} 
      </h1>
      </ion-label>
      </ion-col>


      <!-- If it's minima do this.. -->
        <!-- TXN Description -->
      <ion-col *ngIf="!transaction.values[0].name.name" size="4" fixed="true" [hidden]="ios">
        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) == '-'"> 
          Sent Minima
        </ng-container>

        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) !== '-'">
          Received Minima
        </ng-container>
      </ion-col>

      <!-- TXN Description -->
      <ion-col *ngIf="!transaction.values[0].name.name" size="6" fixed="true" [hidden]="!ios">
        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) == '-'"> 
          Sent Minima
        </ng-container>

        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) !== '-'">
          Received Minima
        </ng-container>
      </ion-col>

      <!-- If it's a TOKEN.. do this.. -->
        <!-- TXN Description -->
      <ion-col *ngIf="transaction.values[0].name.name" size="4" fixed="true" [hidden]="ios">
        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) == '-'"> 
          Sent {{ transaction.values[0].name.name }}
        </ng-container>

        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) !== '-'">
          Received {{ transaction.values[0].name.name }}
        </ng-container>
      </ion-col>

      <!-- TXN Description -->
      <ion-col *ngIf="transaction.values[0].name.name" size="6" fixed="true" [hidden]="!ios">
        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) == '-'"> 
          Sent {{ transaction.values[0].name.name }}
        </ng-container>

        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) !== '-'">
          Received {{ transaction.values[0].name.name }}
        </ng-container>
      </ion-col>
      

      <!-- TXN AMOUNT -->
      <ion-col size="4" fixed="true">
        <ng-container  *ngIf="transaction.values[0].amount.substring(0,1) == '-'"> 
          <h2 class="negative">{{ transaction.values[0].amount}}</h2>
        </ng-container>

        <ng-container  *ngIf="transaction.values[0].amount.substring(0,1) !== '-'">
          <h2 class="positive">{{ "+"+ transaction.values[0].amount}}</h2>
        </ng-container>
      </ion-col>

      <!-- TXN Message -->
      <ion-col size="4" *ngIf="transaction.txpow.body.txn.state.length > 0" [hidden]="ios">
      <ion-note *ngIf="transaction.txpow.body.txn.state[1].data.length <= 15" class="msg-details">{{transaction.txpow.body.txn.state[1].data.substring(0, 15)}}</ion-note>
      <ion-note *ngIf="transaction.txpow.body.txn.state[1].data.length > 15" class="msg-details">{{transaction.txpow.body.txn.state[1].data.substring(0, 8) + "..."}}</ion-note>
      </ion-col>
    </ion-item>

    </ion-row>
      </ion-grid>
      </ng-container>
        </ion-card-content>
          </ion-slide>

    <!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@ Token Creation @@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
    <ion-slide>
      <ion-card-content style="width: 100%; text-align: center;">
    
        <ion-text *ngIf="tokens.length < 1">No token activities to display. </ion-text>
    
    <ng-container *ngIf="tokens.length > 0">
    <ion-grid *ngFor="let transaction of tokens;">
      <ion-row *ngIf="transactions.length >= 1 && transaction.values[0].name === 'Create Token';">
        <ion-item lines="full" class="activity-tokens"
        (click)="presentTokenModal(transaction.txpow.txpowid, 
                  transaction.values[0].amount,
                  transaction.txpow.body.txn.state,
                  transaction.txpow.header.block,
                  transaction.txpow.body.txn.tokengen.tokenid,
                  transaction.txpow.header.date,
                  transaction.txpow.isblock,
                  transaction.values[0].name,
                  transaction.txpow.body.txn.tokengen.token,
                  transaction.txpow.body.txn.tokengen.total,
                  transaction.txpow.body.txn.tokengen.description)">
      
      <!-- TXN Icon -->
      <ion-col size="1" [hidden]="ios">
      <ion-icon name="brush" size="large"></ion-icon>
      </ion-col>

      <!-- TXN Date -->
      <ion-col size="2" fixed="true">
      <ion-label>
      <p id="day">
      {{ transaction.txpow.header.date.substring(8, 10) }}
      </p>
      <h1 id="month">
      {{ transaction.txpow.header.date.substring(4, 7) }} 
      </h1>
      </ion-label>
      </ion-col>

      <!-- TXN Description -->
      <ion-col size="4" class="col-transtype" fixed="true" [hidden]="ios">
        <ion-label id="transaction">
        <h2 class="h2-type">
        Created a token
        </h2>
        <p id="token-name">{{ transaction.txpow.body.txn.tokengen.token }}</p>
        </ion-label>
      </ion-col>
      <!-- TXN Description -->
      <ion-col size="5" class="col-transtype" fixed="true" [hidden]="!ios">
        <ion-label id="transaction">
        <h2 class="h2-type">
        Created a token
        </h2>
        <p id="token-name">{{ transaction.txpow.body.txn.tokengen.token }}</p>
        </ion-label>
      </ion-col>


      <!-- TXN AMOUNT -->
      <ion-col id="amount" size="4" fixed="true">
        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) == '-'"> 
          <h2 class="positive">{{ "+" + transaction.txpow.body.txn.tokengen.total }}</h2>
          <p id="mini-amnt">{{ "-"+transaction.values[0].amount + " MINI"}}</p>
        </ng-container>

        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) !== '-'">
          <h2 class="positive">{{ "+" +transaction.txpow.body.txn.tokengen.total }}</h2>
          <p id="mini-amnt">{{ "-"+transaction.values[0].amount + " MINI"}}</p>
        </ng-container>
      </ion-col>

    </ion-item>
      </ion-row>
      </ion-grid>
      </ng-container>
        </ion-card-content>
         </ion-slide>

    <!-- @@@@@@@@@@@@@@@@@@@@@@@@@ All @@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
    <ion-slide>
      <ion-card-content>

      <ion-text *ngIf="isEmpty">No activities to display.</ion-text>

    <ng-container *ngIf="tokens.length > 0 || transactions.length > 0">
      <ion-grid *ngFor="let transaction of allTransactions;">
      <ion-row *ngIf="transactions.length >= 1 && transaction.values[0].name !== 'Create Token';">
        <ion-item lines="full" class="activity"
        (click)="presentModal(transaction.txpow.txpowid, 
                  transaction.values[0].amount,
                  transaction.txpow.body.txn.state,
                  transaction.txpow.header.block,
                  transaction.txpow.body.txn.inputs[0].tokenid,
                  transaction.txpow.header.date,
                  transaction.txpow.isblock,
                  transaction.values[0].name)">

      <!-- TXN Icon -->
      <ion-col size="1" [hidden]="ios">
      <ion-icon [name]="getTXNType(transaction.values[0].amount)" size="large"></ion-icon>
      </ion-col>

      <!-- TXN Date -->
      <ion-col size="2" class="col-month" fixed="true">
      <ion-label>
      <p id="day">
      {{ transaction.txpow.header.date.substring(8, 10) }}
      </p>
      <h1 id="month">
      {{ transaction.txpow.header.date.substring(4, 7) }} 
      </h1>
      </ion-label>
      </ion-col>

      <!-- If it's minima do this.. -->
        <!-- TXN Description -->
      <ion-col *ngIf="!transaction.values[0].name.name" size="4" fixed="true" [hidden]="ios">
        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) == '-'"> 
          Sent Minima
        </ng-container>

        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) !== '-'">
          Received Minima
        </ng-container>
      </ion-col>

      <!-- TXN Description -->
      <ion-col *ngIf="!transaction.values[0].name.name" size="6" fixed="true" [hidden]="!ios">
        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) == '-'"> 
          Sent Minima
        </ng-container>

        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) !== '-'">
          Received Minima
        </ng-container>
      </ion-col>

      <!-- If it's a TOKEN.. do this.. -->
        <!-- TXN Description -->
      <ion-col *ngIf="transaction.values[0].name.name" size="4" fixed="true" [hidden]="ios">
        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) == '-'"> 
          Sent {{ transaction.values[0].name.name }}
        </ng-container>

        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) !== '-'">
          Received {{ transaction.values[0].name.name }}
        </ng-container>
      </ion-col>

      <!-- TXN Description -->
      <ion-col *ngIf="transaction.values[0].name.name" size="6" fixed="true" [hidden]="!ios">
        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) == '-'"> 
          Sent {{ transaction.values[0].name.name }}
        </ng-container>

        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) !== '-'">
          Received {{ transaction.values[0].name.name }}
        </ng-container>
      </ion-col>

      <!-- TXN AMOUNT -->
      <ion-col size="4" fixed="true">
        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) == '-'"> 
          <h2 class="negative">{{ transaction.values[0].amount}}</h2>
        </ng-container>

        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) !== '-'">
          <h2 class="positive">{{ "+"+ transaction.values[0].amount}}</h2>
        </ng-container>
      </ion-col>

      <!-- TXN Message -->
      <ion-col size="4" *ngIf="transaction.txpow.body.txn.state.length > 0" [hidden]="ios">
      <ion-note *ngIf="transaction.txpow.body.txn.state[1].data.length <= 15" class="msg-details">{{transaction.txpow.body.txn.state[1].data.substring(0, 15)}}</ion-note>
      <ion-note *ngIf="transaction.txpow.body.txn.state[1].data.length > 15" class="msg-details">{{transaction.txpow.body.txn.state[1].data.substring(0, 15) + "..."}}</ion-note>
      </ion-col>
    </ion-item>
    <!-- Tokens -->
    </ion-row>
    
    <ion-row *ngIf="transactions.length >= 1 && transaction.values[0].name === 'Create Token';">
    <ion-item
    lines="full"
    class="activity-tokens"
    (click)="presentTokenModal(transaction.txpow.txpowid, 
                  transaction.values[0].amount,
                  transaction.txpow.body.txn.state,
                  transaction.txpow.header.block,
                  transaction.txpow.body.txn.tokengen.tokenid,
                  transaction.txpow.header.date,
                  transaction.txpow.isblock,
                  transaction.values[0].name,
                  transaction.txpow.body.txn.tokengen.token,
                  transaction.txpow.body.txn.tokengen.total,
                  transaction.txpow.body.txn.tokengen.description)">
      <!-- TXN Icon -->
      <ion-col size="1" [hidden]="ios">
      <ion-icon name="brush" size="large"></ion-icon>
      </ion-col>

      <!-- TXN Date -->
      <ion-col size="2" fixed="true">
      <ion-label>
      <p id="day">
      {{ transaction.txpow.header.date.substring(8, 10) }}
      </p>
      <h1 id="month">
      {{ transaction.txpow.header.date.substring(4, 7) }} 
      </h1>
      </ion-label>
      </ion-col>

      <!-- TXN Description -->
      <ion-col size="4" class="col-transtype" fixed="true" [hidden]="ios">
        <ion-label id="transaction">
        <h2 class="h2-type">
        Created a token
        </h2>
        <p id="token-name">{{ transaction.txpow.body.txn.tokengen.token }}</p>
        </ion-label>
      </ion-col>
      <!-- TXN Description -->
      <ion-col size="5" class="col-transtype" fixed="true" [hidden]="!ios">
        <ion-label id="transaction">
        <h2 class="h2-type">
        Created a token
        </h2>
        <p id="token-name">{{ transaction.txpow.body.txn.tokengen.token }}</p>
        </ion-label>
      </ion-col>


      <!-- TXN AMOUNT -->
      <ion-col id="amount" size="4" fixed="true">
        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) == '-'"> 
          <h2 class="positive">{{ "+" + transaction.txpow.body.txn.tokengen.total }}</h2>
          <p id="mini-amnt">{{ "-"+transaction.values[0].amount + " MINI"}}</p>
        </ng-container>

        <ng-container *ngIf="transaction.values[0].amount.substring(0,1) !== '-'">
          <h2 class="positive">{{ "+" +transaction.txpow.body.txn.tokengen.total }}</h2>
          <p id="mini-amnt">{{ "-"+transaction.values[0].amount + " MINI"}}</p>
        </ng-container>
      </ion-col>
    
    </ion-item>
      </ion-row>
        </ion-grid>
          </ng-container>
          </ion-card-content>
            </ion-slide>


    <ion-slide>
    <!-- SKELETON FOR UX LOADING -->
  <ng-container *ngFor="let length of t_summarySpoof">
  <ion-grid>
    <ion-row *ngIf="length.values[0].name !== 'Create Token' && transactions.length < 1">
      <ion-item  class="activity-skeleton" lines="full">

    <!-- TXN Icon Skeleton -->
    <ion-col size="1" [hidden]="ios">
    <ion-skeleton-text animated style="width: 50%; height: 50%;"></ion-skeleton-text>
    </ion-col>

    <!-- TXN Date Skeleton -->
    <ion-col size="2" class="col-month" fixed="true">
      <ion-label>
      <p id="day">
        <ion-skeleton-text animated style="width: 5%"></ion-skeleton-text>
      </p>
      <h1 id="month">
        <ion-skeleton-text animated style="width: 10%; height: 10%;"></ion-skeleton-text>
      </h1>
      </ion-label>
    </ion-col>
  <!-- TXN Details Skeleton -->
  <ion-col size="2"class="col-transtype" fixed="true">
    <ion-label id="transaction">
      <h2 class="h2-type">
        <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
      </h2>
    </ion-label>
  </ion-col>
  <!-- TXN Amount Skeleton-->
  <ion-col size="6" class="col-transamnt" fixed="true">
    <ion-label class="amount">
      <h2 class="amount-h2">
        <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
      </h2>
    </ion-label> 
  </ion-col>

  <!-- TXN Message Skeleton -->
  <ion-col size="4" [hidden]="ios">
  <ion-skeleton-text animated style="width: 50%; height: 10%;"></ion-skeleton-text>
  </ion-col>

  </ion-item>
    </ion-row>
      </ion-grid>
      </ng-container>
        </ion-slide>
      </ion-slides>
  </ion-card>


  
  
  
  
</ion-content>
  </ion-app>