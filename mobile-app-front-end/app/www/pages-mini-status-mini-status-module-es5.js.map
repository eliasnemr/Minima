{"version":3,"sources":["./src/app/pages/mini-status/mini-status.page.html","./node_modules/rxjs-compat/_esm5/Observable/timer.js","./src/app/pages/mini-status/mini-status.module.ts","./src/app/pages/mini-status/mini-status.page.scss","./src/app/pages/mini-status/mini-status.page.ts","./src/app/service/status.service.ts"],"names":[],"mappings":"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","file":"pages-mini-status-mini-status-module-es5.js","sourcesContent":["module.exports = \"<ion-app>\\n<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button class=\\\"menu-icon\\\"></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title class=\\\"large-text\\\">\\n      Status\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-card>\\n    <ion-card-header *ngIf=\\\"status?.version\\\">\\n     Minima Node{{ \\\" Version \\\"+ status?.version }}\\n    </ion-card-header>\\n    <ion-card-header *ngIf=\\\"!status?.version\\\">\\n      Minima Node{{ \\\" Version ..loading\\\"}}\\n     </ion-card-header>\\n    <ion-card-content>\\n      <ion-list>\\n        <ion-grid>\\n          <ion-row>\\n            <ion-col size=\\\"12\\\">\\n              <h5>\\n                Status\\n              </h5>\\n              <p *ngIf=\\\"status?.version\\\" class=\\\"status-on small-text\\\"> Online</p>\\n              <p *ngIf=\\\"!status?.version\\\" class=\\\"status-off small-text\\\"> Offline</p>\\n            </ion-col>\\n          </ion-row>\\n          <ion-row>\\n            <ion-col size=\\\"12\\\">\\n              <h5>\\n                Node Version\\n              </h5>\\n              <p *ngIf=\\\"status?.version\\\" class=\\\"small-text\\\">{{ \\\"v\\\"+status?.version }}</p>\\n              <p *ngIf=\\\"!status?.version\\\" class=\\\"small-text\\\">{{ \\\"v ..loading\\\" }}</p>\\n            </ion-col>\\n          </ion-row>\\n          <ion-row>\\n            <ion-col size=\\\"12\\\">\\n              <h5>\\n                Uptime\\n              </h5>\\n              <p class=\\\"small-text\\\">{{ status?.uptime.substring(0,51) }}</p>\\n            </ion-col>\\n          </ion-row>\\n          <ion-row>\\n            <ion-col size=\\\"12\\\">\\n              <h5>\\n                Configuration path\\n              </h5>\\n              <p class=\\\"small-text\\\">{{ status?.conf }}</p>\\n            </ion-col>\\n          </ion-row>\\n          <ion-row>\\n            <ion-col size=\\\"12\\\">\\n              <h5>\\n                Host IP\\n              </h5>\\n              <p class=\\\"small-text\\\">{{ status?.host +':' }}{{ status?.minimaport }}</p>\\n            </ion-col>\\n          </ion-row>\\n          <ion-row>\\n            <ion-col size=\\\"12\\\">\\n              <h5>\\n                RPC Port\\n              </h5>\\n              <p class=\\\"small-text\\\">{{ status?.rpcport }}</p>\\n            </ion-col>\\n          </ion-row>\\n          <ion-row>\\n            <ion-col size=\\\"12\\\">\\n              <h5>\\n                Chainspeed\\n              </h5>\\n              <p class=\\\"small-text\\\">{{ status?.chainspeed }}</p>\\n            </ion-col>\\n          </ion-row>\\n          <ion-row>\\n            <ion-col size=\\\"12\\\">\\n              <h5>\\n                Chainlength\\n              </h5>\\n              <p class=\\\"small-text\\\">{{ status?.chainlength }}</p>\\n            </ion-col>\\n          </ion-row>\\n          <ion-row>\\n            <ion-col size=\\\"12\\\">\\n              <h5>\\n                Chainweight\\n              </h5>\\n              <p class=\\\"small-text\\\">{{ status?.chainweight }}</p>\\n            </ion-col>\\n          </ion-row>\\n          <ion-row>\\n            <ion-col size=\\\"12\\\">\\n              <h5>\\n                Last Block Number\\n              </h5>\\n              <p class=\\\"small-text\\\">{{ status?.lastblock }}</p>\\n            </ion-col>\\n          </ion-row>\\n          <ion-row>\\n            <ion-col size=\\\"12\\\">\\n              <h5>\\n                Relayed Time\\n              </h5>\\n              <p class=\\\"small-text\\\"> {{ status?.lasttime.substring(4, 30) }}</p>\\n            </ion-col>\\n          </ion-row>\\n        </ion-grid>\\n      </ion-list> \\n    </ion-card-content>\\n  </ion-card>\\n\\n</ion-content>\\n</ion-app>\"","export { timer } from 'rxjs';\n//# sourceMappingURL=timer.js.map","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MiniStatusPage } from './mini-status.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MiniStatusPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [MiniStatusPage]\n})\nexport class MiniStatusPageModule {}\n","module.exports = \"ion-card-header {\\n  --background: var(--ion-background-color, #f2f2f2);\\n  background: -webkit-gradient(linear, left top, left bottom, from(var(--ion-background-color, #fff)), to(var(--ion-background-color, #f2f2f2))) !important;\\n  background: linear-gradient(to bottom, var(--ion-background-color, #fff) 0%, var(--ion-background-color, #f2f2f2) 100%) !important;\\n}\\n\\nion-list-header {\\n  background: var(--ion-card-header);\\n}\\n\\n.status-on {\\n  color: #48D2D3;\\n}\\n\\n.status-off {\\n  color: #f2f2f2;\\n}\\n\\nion-toolbar {\\n  --background: var(--card-header-color);\\n}\\n\\nion-row {\\n  margin-bottom: 8px;\\n}\\n\\nh5, ion-card-header {\\n  font-weight: 600;\\n  letter-spacing: -0.02em;\\n}\\n\\np {\\n  opacity: 0.6;\\n  font-weight: 500;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9lbGlhcy9Qcm9qZWN0cy9taW5pbWFjb3JlL21vYmlsZS1hcHAtZnJvbnQtZW5kL2FwcC9zcmMvYXBwL3BhZ2VzL21pbmktc3RhdHVzL21pbmktc3RhdHVzLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvbWluaS1zdGF0dXMvbWluaS1zdGF0dXMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0RBQUE7RUFDQSx5SkFBQTtFQUFBLGtJQUFBO0FDQ0o7O0FERUE7RUFDSSxrQ0FBQTtBQ0NKOztBREVBO0VBQ0ksY0FBQTtBQ0NKOztBRENBO0VBQ0ksY0FBQTtBQ0VKOztBREFBO0VBQ0ksc0NBQUE7QUNHSjs7QURBQTtFQUNJLGtCQUFBO0FDR0o7O0FEQUE7RUFDSSxnQkFBQTtFQUNBLHVCQUFBO0FDR0o7O0FEQUE7RUFDSSxZQUFBO0VBQ0EsZ0JBQUE7QUNHSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL21pbmktc3RhdHVzL21pbmktc3RhdHVzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jYXJkLWhlYWRlciB7XG4gICAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1pb24tYmFja2dyb3VuZC1jb2xvciwgI2YyZjJmMik7XG4gICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgIHZhcigtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yLCAjZmZmKSAwJSwgdmFyKC0taW9uLWJhY2tncm91bmQtY29sb3IsICNmMmYyZjIpIDEwMCUpICFpbXBvcnRhbnQ7XG59XG5cbmlvbi1saXN0LWhlYWRlciB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0taW9uLWNhcmQtaGVhZGVyKTtcbn1cblxuLnN0YXR1cy1vbiB7XG4gICAgY29sb3I6ICM0OEQyRDM7XG59XG4uc3RhdHVzLW9mZiB7XG4gICAgY29sb3I6ICNmMmYyZjI7XG59XG5pb24tdG9vbGJhciB7XG4gICAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1jYXJkLWhlYWRlci1jb2xvcik7XG59XG5cbmlvbi1yb3cge1xuICAgIG1hcmdpbi1ib3R0b206IDhweDtcbn1cblxuaDUsIGlvbi1jYXJkLWhlYWRlciB7XG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICBsZXR0ZXItc3BhY2luZzogLTAuMDJlbTtcbn1cblxucCB7XG4gICAgb3BhY2l0eTogMC42O1xuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG59IiwiaW9uLWNhcmQtaGVhZGVyIHtcbiAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1pb24tYmFja2dyb3VuZC1jb2xvciwgI2YyZjJmMik7XG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sIHZhcigtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yLCAjZmZmKSAwJSwgdmFyKC0taW9uLWJhY2tncm91bmQtY29sb3IsICNmMmYyZjIpIDEwMCUpICFpbXBvcnRhbnQ7XG59XG5cbmlvbi1saXN0LWhlYWRlciB7XG4gIGJhY2tncm91bmQ6IHZhcigtLWlvbi1jYXJkLWhlYWRlcik7XG59XG5cbi5zdGF0dXMtb24ge1xuICBjb2xvcjogIzQ4RDJEMztcbn1cblxuLnN0YXR1cy1vZmYge1xuICBjb2xvcjogI2YyZjJmMjtcbn1cblxuaW9uLXRvb2xiYXIge1xuICAtLWJhY2tncm91bmQ6IHZhcigtLWNhcmQtaGVhZGVyLWNvbG9yKTtcbn1cblxuaW9uLXJvdyB7XG4gIG1hcmdpbi1ib3R0b206IDhweDtcbn1cblxuaDUsIGlvbi1jYXJkLWhlYWRlciB7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIGxldHRlci1zcGFjaW5nOiAtMC4wMmVtO1xufVxuXG5wIHtcbiAgb3BhY2l0eTogMC42O1xuICBmb250LXdlaWdodDogNTAwO1xufSJdfQ== */\"","import { Subscription } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { StatusService } from './../../service/status.service';\nimport { Component, OnInit, ChangeDetectorRef, Input } from '@angular/core';\nimport { Status } from '../../models/status.model';\nimport { Platform } from '@ionic/angular';\n\n@Component({\n  selector: 'app-mini-status',\n  templateUrl: './mini-status.page.html',\n  styleUrls: ['./mini-status.page.scss'],\n  providers: [ StatusService ] \n})\n\nexport class MiniStatusPage implements OnInit {\n\n  status: { status: boolean, minifunc: string, message: string, response: Status};\n  statusSubscription: Subscription;\n\n  public lastJSON: string;\n\n  constructor(private service: StatusService, private ref: ChangeDetectorRef, private plat: Platform) {}\n \n  ngOnInit() { }\n\n  ionViewWillEnter() {\n    setTimeout(() => {\n      this.updateStatus(); // subscribes & polls status\n    }, 500);\n\n    window.addEventListener('MinimaEvent', (evt: any)=> {\n      // Event connection success\n      if(evt.detail.event === 'newblock') {\n\n        this.updateStatus();\n        \n      } \n    });\n  }\n\n  ionViewWillLeave(){\n  \n    if(this.statusSubscription){\n\n      this.statusSubscription.unsubscribe(); // unsubs\n\n    }\n\n  }\n\n  getImg() {\n    if(document.body.classList.value === 'dark'){\n      return '../../assets/fulllogodark.svg';\n    } else {\n      return '../../assets/fulllogo.svg';\n    }\n  }\n\n  checkPlatform(): Boolean {\n    if(this.plat.is('ios') || this.plat.is('android')){\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  updateStatus() {\n\n    this.statusSubscription = this.service.getStatus()\n    .pipe(map(responseData => {\n      \n      const status = responseData;\n      \n      return status;\n    })\n    )\n    .subscribe((res : any) => {\n      \n      if(this.lastJSON != JSON.stringify(res)){\n        this.status = res;\n        this.lastJSON = JSON.stringify(res);\n      } \n      \n      \n    });\n  }\n  \n\n  \n}\n","import { Status } from '../models/status.model';\nimport { Injectable } from '@angular/core';\nimport { Observable, Subject } from 'rxjs';\nimport { map, concatMap } from 'rxjs/operators';\nimport { timer } from 'rxjs/Observable/timer';\n\ndeclare var Minima: any;\n@Injectable({\n  providedIn: 'root'\n})\nexport class StatusService {\n\n  polledStatus$: Observable<any>;\n  manualRefresh = new Subject();\n\n  constructor(\n  ) { }\n   \n  getStatus(): Observable<{ status: boolean, minifunc: string, message: string, response: Status}> {\n    return this.request('status');\n  }\n\n  private request(route: any) {\n    const statusObservable = Observable.create(observer => {\n\n      Minima.cmd('status', (res:any) => {\n        observer.next(res.response);\n      })\n    });\n\n    let status$ = statusObservable;\n    \n    return this.polledStatus$ = timer(0, 3000).pipe(\n\n      concatMap(_ => status$),\n      map((res: {status: boolean, minifunc: string, message: string, response: Status}) => res)\n\n    );\n  }\n}"],"sourceRoot":""}